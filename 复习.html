<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>集成电路原理与设计 - 最终交互式复习指南</title>
    
    <!-- MathJax Configuration for both inline and display math -->
    <script>
        MathJax = {
          tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']]
          },
          svg: {
            fontCache: 'global'
          }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        :root {
            --primary-color: #0d47a1; /* Deep Blue */
            --secondary-color: #002171; /* Darker Blue */
            --accent-color: #fdd835; /* Yellow */
            --bg-color: #f8f9fa;
            --text-color: #212529;
            --nav-bg: #e9ecef;
            --border-color: #ced4da;
            --header-font: 'Helvetica Neue', 'Segoe UI', Arial, sans-serif;
            --body-font: 'Georgia', 'Times New Roman', serif;
            --code-font: 'Courier New', Courier, monospace;
            --nav-width: 300px;
        }

        /* General Body and Layout */
        body {
            font-family: var(--body-font);
            line-height: 1.8;
            color: var(--text-color);
            background-color: var(--bg-color);
            margin: 0;
            display: flex;
            transition: all 0.3s ease;
        }

        /* Sidenav Styles */
        #sidenav {
            width: var(--nav-width);
            position: fixed;
            height: 100%;
            overflow-y: auto;
            background-color: var(--nav-bg);
            border-right: 1px solid var(--border-color);
            padding: 20px;
            box-sizing: border-box;
            flex-shrink: 0;
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        #sidenav h2 {
            font-family: var(--header-font);
            color: var(--secondary-color);
            font-size: 1.4em;
            margin-top: 0;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 8px;
        }

        #sidenav ul { list-style-type: none; padding: 0; }
        #sidenav li > a {
            display: block;
            padding: 8px 10px;
            text-decoration: none;
            color: var(--primary-color);
            font-weight: bold;
            font-family: var(--header-font);
            border-radius: 4px;
            transition: background-color 0.3s, color 0.3s;
            word-wrap: break-word;
        }
        #sidenav li > a:hover { background-color: var(--primary-color); color: white; }
        
        #sidenav ul ul { padding-left: 20px; }
        #sidenav ul ul a { font-weight: normal; font-size: 0.9em; color: #34495e; }
        #sidenav ul ul a:hover { background-color: #bdc3c7; color: var(--secondary-color); }
        
        .key-topic-nav h3 { font-size: 1.1em; color: var(--secondary-color); margin-top: 25px; margin-bottom: 10px; border-bottom:1px solid #ccc; padding-bottom:5px; }
        .key-topic-nav a { font-weight: normal; font-size: 0.95em; display: block; padding: 5px 10px; }
        .key-topic-nav a:hover { background-color: #d6dbe0; }

        /* Main Content Styles */
        #main-content {
            margin-left: var(--nav-width);
            padding: 20px 40px;
            width: calc(100% - var(--nav-width));
            box-sizing: border-box;
            transition: margin-left 0.3s ease, width 0.3s ease;
            overflow-wrap: break-word; /* Ensure wrapping */
        }

        /* Sidebar Toggle Button */
        #menu-toggle {
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1001;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: left 0.3s ease;
        }

        /* Collapsed State */
        body.sidenav-collapsed #sidenav {
            transform: translateX(calc(-1 * var(--nav-width)));
        }
        body.sidenav-collapsed #main-content {
            margin-left: 0;
            width: 100%;
        }
        
        /* General Content Styling */
        h1, h2, h3, h4 {
            font-family: var(--header-font);
            color: var(--primary-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            word-break: break-all;
        }
        
        h1 { color: var(--secondary-color); font-size: 2.5em; text-align: center; border-bottom: 3px solid var(--accent-color); margin-bottom: 30px;}
        h2 { font-size: 2em; margin-top: 40px;}
        h3 { font-size: 1.6em; border-bottom-style: dashed; margin-top: 30px;}
        h4 { font-size: 1.25em; border-bottom: 1px solid #eee; margin-top: 25px;}

        p, li, td { word-wrap: break-word; overflow-wrap: break-word; }

        .highlight { color: #d32f2f; font-weight: bold; }
        strong.highlight {
            background-color: #fffde7;
            padding: 3px 7px;
            border-radius: 4px;
            border: 1px solid #fbc02d;
            font-family: var(--header-font);
        }

        .formula-box {
            background-color: #e3f2fd;
            border-left: 5px solid var(--primary-color);
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            font-size: 1.1em;
            overflow-x: auto; /* Handle extremely long unbreakable formulas */
        }
        
        .example-box, .key-topic-box {
            background-color: #fff;
            border: 1px solid var(--border-color);
            padding: 25px;
            margin: 25px 0;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
        }
        .example-box h4, .key-topic-box h4 {
            color: var(--secondary-color);
            border-bottom: 2px solid var(--accent-color);
            margin-top: 0;
            font-size: 1.4em;
        }
        .example-box ol li, .key-topic-box ol li { margin-bottom: 10px; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            table-layout: fixed; /* Helps with word wrapping in tables */
        }
        th, td { border: 1px solid var(--border-color); padding: 12px; text-align: center; vertical-align: middle; word-wrap: break-word; }
        th { background-color: #f1f3f5; font-family: var(--header-font); }
        td { background-color: #fff; }

        .note {
            background-color: #e8f5e9;
            border-left: 5px solid #4caf50;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .solution-box {
            background-color: #f3e5f5;
            border-left: 5px solid #8e24aa;
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
        }
        .image-placeholder {
            display: block;
            background-color: #e9ecef;
            border: 2px dashed #adb5bd;
            text-align: center;
            padding: 40px 20px;
            margin: 20px auto;
            border-radius: 8px;
            color: #495057;
            font-style: italic;
            max-width: 80%;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            body:not(.sidenav-open) #sidenav {
                 transform: translateX(calc(-1 * var(--nav-width)));
            }
             body.sidenav-open #sidenav {
                transform: translateX(0);
            }
            #main-content { 
                margin-left: 0; 
                width: 100%; 
                padding: 20px; 
            }
            body.sidenav-open #menu-toggle {
                left: calc(var(--nav-width) + 15px);
            }
        }
    </style>
</head>
<body>

<button id="menu-toggle">&#9776;</button>

<nav id="sidenav">
    <h2>复习导航</h2>
    <ul>
        <li>
            <a href="#ch2">第2章: IC工艺与CMOS结构</a>
            <ul>
                <li><a href="#ch2-1">2.1 基本工艺及CMOS结构</a></li>
                <li><a href="#ch2-2">2.2 闩锁效应与深亚微米工艺</a></li>
                <li><a href="#ch2-3">2.3 SOI CMOS结构与工艺</a></li>
            </ul>
        </li>
        <li>
            <a href="#ch3">第3章: MOS晶体管特性</a>
            <ul>
                <li><a href="#ch3-1">3.1 阈值电压</a></li>
                <li><a href="#ch3-2">3.2 电流-电压特性</a></li>
                <li><a href="#ch3-3">3.3 二阶效应</a></li>
                <li><a href="#ch3-4">3.4 瞬态特性 (电容)</a></li>
                <li><a href="#ch3-5">3.5 集成电路中的无源器件</a></li>
            </ul>
        </li>
        <li>
            <a href="#ch4">第4章: CMOS数字逻辑电路</a>
            <ul>
                <li><a href="#ch4-1">4.1 静态CMOS逻辑电路</a></li>
                <li><a href="#ch4-2">4.2 CMOS反相器瞬态特性</a></li>
                <li><a href="#ch4-3">4.3 MOS传输门</a></li>
            </ul>
        </li>
    </ul>

    <div class="key-topic-nav">
        <h3>重点专题快速导航</h3>
        <ul>
            <li><a href="#key-topic-1">1. 噪声容限计算</a></li>
            <li><a href="#key-topic-2">2. 静态CMOS逻辑实现</a></li>
            <li><a href="#key-topic-3">3. 反相器瞬态设计</a></li>
            <li><a href="#key-topic-4">4. NAND/NOR门设计</a></li>
            <li><a href="#key-topic-5">5. 多功能发生器分析</a></li>
            <li><a href="#key-topic-6">6. MOS管状态与电流计算</a></li>
        </ul>
    </div>
</nav>

<div id="main-content">
    <h1>集成电路原理与设计 - 深度复习指南</h1>

    <div class="note">
        <strong>提示</strong>: 本文档中的 [图片: ...] 标记为图片占位符，旨在提示原文中对应的图表位置，方便您对照PDF文档进行学习。
    </div>

    <!-- Key Topics Section -->
    <section id="key-topics">
        <h2>重点专题讲解</h2>
        
        <div id="key-topic-6" class="key-topic-box">
            <h4>专题 6: 计算MOS管电流并分析其工作状态</h4>
            <p>这是分析所有MOS电路的基础。分析过程通常遵循一个标准的两步法：首先判断工作区，然后代入对应的电流公式计算。</p>
            <ol>
                <li><strong class="highlight">判断工作状态</strong>:
                    <ul>
                        <li><strong>第一步：判断导通/截止</strong>。比较栅源电压 $V_{GS}$ 和阈值电压 $V_T$。
                            <ul>
                                <li>对于NMOS，如果 $V_{GS} > V_T$，则导通；否则截止。</li>
                                <li>对于PMOS，如果 $V_{GS} < V_T$ (注意$V_T$为负)，则导通；否则截止。</li>
                            </ul>
                        </li>
                        <li><strong>第二步：判断线性区/饱和区</strong>。如果器件导通，则比较漏源电压 $V_{DS}$ 和过驱动电压 $(V_{GS} - V_T)$。
                            <ul>
                                <li>对于NMOS：如果 $0 < V_{DS} \le V_{GS} - V_T$，则为<strong class="highlight">线性区</strong>。如果 $V_{DS} > V_{GS} - V_T$，则为<strong class="highlight">饱和区</strong>。</li>
                                <li>对于PMOS：由于电流方向和电压极性相反，通常比较 $|V_{DS}|$ 和 $|V_{GS} - V_T|$。如果 $0 < |V_{DS}| \le |V_{GS} - V_T|$，则为<strong class="highlight">线性区</strong>。如果 $|V_{DS}| > |V_{GS} - V_T|$，则为<strong class="highlight">饱和区</strong>。</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><strong class="highlight">计算沟道电流 $I_D$</strong>:
                    <ul>
                        <li><strong>线性区公式</strong>: $I_D = \mu C_{ox} \frac{W}{L} \left[ (V_{GS} - V_T)V_{DS} - \frac{1}{2}V_{DS}^2 \right]$</li>
                        <li><strong>饱和区公式</strong> (忽略二阶效应): $I_D = \frac{1}{2} \mu C_{ox} \frac{W}{L} (V_{GS} - V_T)^2$</li>
                    </ul>
                </li>
            </ol>
            
            <div class="example-box">
                <h4>例题：NMOS管状态与电流计算</h4>
                <p><strong>题目</strong>: 假设增强型NMOS管的 $W/L=5\mu m/1\mu m$, $V_{T}=0.7V$, $\mu_{n}C_{ox}=110 \mu A/V^2$。
                <br> a) 如果 $V_D=1V$, $V_S=0V$, $V_G=2V$, 衬底接地。求状态和电流。
                <br> b) 如果 $V_D=3V$, $V_S=0V$, $V_G=2V$, 衬底接地。求状态和电流。</p>
                <div class="solution-box">
                    <p><strong>解答 a):</strong></p>
                    <ol>
                        <li><strong>计算电压</strong>: $V_{GS} = V_G - V_S = 2V - 0V = 2V$。$V_{DS} = V_D - V_S = 1V - 0V = 1V$。</li>
                        <li><strong>判断工作区</strong>:
                            <ul>
                                <li>导通判断: $V_{GS} = 2V > V_T = 0.7V$，器件<strong class="highlight">导通</strong>。</li>
                                <li>区域判断: 过驱动电压 $V_{GS} - V_T = 2V - 0.7V = 1.3V$。
                                因为 $V_{DS} = 1V \le (V_{GS} - V_T) = 1.3V$，所以MOS管工作在<strong class="highlight">线性区</strong>。</li>
                            </ul>
                        </li>
                        <li><strong>计算电流</strong>:
                            $I_D = (110 \frac{\mu A}{V^2}) \times (\frac{5}{1}) \times \left[ (2 - 0.7) \times 1 - \frac{1}{2} \times 1^2 \right] = 550 \times [1.3 - 0.5] = 550 \times 0.8 = \mathbf{440 \mu A}$。
                        </li>
                    </ol>
                     <p><strong>解答 b):</strong></p>
                     <ol>
                        <li><strong>计算电压</strong>: $V_{GS} = 2V$，$V_{DS} = 3V$。</li>
                        <li><strong>判断工作区</strong>:
                            <ul>
                                <li>导通判断: $V_{GS} = 2V > V_T = 0.7V$，器件<strong class="highlight">导通</strong>。</li>
                                <li>区域判断: 过驱动电压 $V_{GS} - V_T = 1.3V$。
                                因为 $V_{DS} = 3V > (V_{GS} - V_T) = 1.3V$，所以MOS管工作在<strong class="highlight">饱和区</strong>。</li>
                            </ul>
                        </li>
                        <li><strong>计算电流</strong>:
                           $I_D = \frac{1}{2} (\mu_n C_{ox}) (\frac{W}{L}) (V_{GS} - V_T)^2 = \frac{1}{2} \times (110 \frac{\mu A}{V^2}) \times (\frac{5}{1}) \times (2 - 0.7)^2 = 275 \times (1.3)^2 = 275 \times 1.69 \approx \mathbf{465 \mu A}$。
                        </li>
                    </ol>
                </div>
            </div>
             <div class="example-box">
                <h4>例题：PMOS管状态与电流计算</h4>
                <p><strong>题目</strong>: 假设增强型PMOS管的 $W/L=4.2\mu m/0.6\mu m$, $V_{T}=-0.9V$, $\mu_{p}C_{ox}=60 \mu A/V^2$。
                <br> a) 如果 $V_D=1V$, $V_S=5V$, $V_G=3V$, 衬底接5V。求状态和电流。
                <br> b) 如果 $V_D=3V$, $V_S=5V$, $V_G=2V$, 衬底接5V。求状态和电流。</p>
                <div class="solution-box">
                     <p><strong>解答 a):</strong></p>
                    <ol>
                        <li><strong>计算电压</strong>: $V_{GS} = V_G - V_S = 3V - 5V = -2V$。$V_{DS} = V_D - V_S = 1V - 5V = -4V$。</li>
                        <li><strong>判断工作区</strong>:
                            <ul>
                                <li>导通判断: $V_{GS} = -2V < V_T = -0.9V$，器件<strong class="highlight">导通</strong>。</li>
                                <li>区域判断: 过驱动电压 $|V_{GS} - V_T| = |-2V - (-0.9V)| = |-1.1V| = 1.1V$。
                                因为 $|V_{DS}| = |-4V| = 4V > |V_{GS} - V_T| = 1.1V$，所以PMOS管工作在<strong class="highlight">饱和区</strong>。</li>
                            </ul>
                        </li>
                        <li><strong>计算电流</strong>: (PMOS电流为负值，表示从源极流出)
                           $I_D = -\frac{1}{2} (\mu_p C_{ox}) (\frac{W}{L}) (V_{GS} - V_T)^2 =  \mathbf{-254.1 \mu A}$。
                        </li>
                    </ol>
                     <p><strong>解答 b):</strong></p>
                     <ol>
                        <li><strong>计算电压</strong>: $V_{GS} = V_G - V_S = 2V - 5V = -3V$。$V_{DS} = V_D - V_S = 3V - 5V = -2V$。</li>
                        <li><strong>判断工作区</strong>:
                            <ul>
                                <li>导通判断: $V_{GS} = -3V < V_T = -0.9V$，器件<strong class="highlight">导通</strong>。</li>
                                <li>区域判断: 过驱动电压 $|V_{GS} - V_T| = |-3V - (-0.9V)| = |-2.1V| = 2.1V$。
                                因为 $|V_{DS}| = |-2V| = 2V \le |V_{GS} - V_T| = 2.1V$，所以PMOS管工作在<strong class="highlight">线性区</strong>。</li>
                            </ul>
                        </li>
                        <li><strong>计算电流</strong>:
                           $I_D = -(\mu_p C_{ox}) (\frac{W}{L}) \left[ (V_{GS} - V_T)V_{DS} - \frac{1}{2}V_{DS}^2 \right]  = \mathbf{-924 \mu A}$。
                        </li>
                    </ol>
                </div>
            </div>
        </div>

        <div id="key-topic-1" class="key-topic-box">
            <h4>专题 1: 计算反相器的最大噪声容限</h4>
            <p>噪声容限是衡量数字电路抗干扰能力的重要指标。它表示在保证输出不发生错误翻转的情况下，输入端能容忍的最大噪声电压。噪声容限分为低电平噪声容限($V_{NML}$)和高电平噪声容限($V_{NMH}$)。</p>
            <ul>
                <li><strong class="highlight">低电平噪声容限</strong>: $V_{NML} = V_{IL} - V_{OL}$</li>
                <li><strong class="highlight">高电平噪声容限</strong>: $V_{NMH} = V_{OH} - V_{IH}$</li>
            </ul>
            <p>对于理想的CMOS反相器，$V_{OL} = 0$, $V_{OH} = V_{DD}$。为了获得<strong class="highlight">最大噪声容限</strong>，通常将逻辑门限电压 $V_{it}$ (即电压传输特性曲线中斜率为-1的点) 设定为 $V_{IL}$ 和 $V_{IH}$ 的共同值，即 $V_{IL} = V_{IH} = V_{it}$。此时：</p>
            <div class="formula-box">
                $V_{NML} = V_{it}$ <br>
                $V_{NMH} = V_{DD} - V_{it}$
            </div>
            <p>电路的<strong class="highlight">最大噪声容限</strong>取两者中的较小值：$\min(V_{NML}, V_{NMH})$。最佳设计是让 $V_{it} = V_{DD}/2$，此时 $V_{NML} = V_{NMH}$，噪声容限达到最大化。</p>
             <div class="example-box">
                <h4>例题：噪声容限计算</h4>
                <p><strong>题目</strong>: 考虑具有如下参数的CMOS反相器，电源电压取3.3V。NMOS: $V_{TN}=0.6V$, $\mu_{n}C_{ox}=60\mu A/V^2$, $(W/L)_n=8$。PMOS: $V_{Tp}=-0.7V$, $\mu_{p}C_{ox}=25\mu A/V^2$, $(W/L)_p=12$。求该反相器由逻辑阈值确定的最大噪声容限。</p>
                <div class="solution-box">
                    <p><strong>解答:</strong></p>
                    <ol>
                        <li><strong>计算导电因子比 $K_R$</strong>:
                            <ul>
                                <li>$K_n = \mu_n C_{ox} (W/L)_n = 60 \mu A/V^2 \times 8 = 480 \mu A/V^2$</li>
                                <li>$K_p = \mu_p C_{ox} (W/L)_p = 25 \mu A/V^2 \times 12 = 300 \mu A/V^2$</li>
                                <li>$K_R = K_p / K_n = 300 / 480 = 0.625$</li>
                            </ul>
                        </li>
                        <li><strong>计算逻辑阈值电压 $V_{it}$</strong>:
                            <ul>
                                <li><strong>注意</strong>: PPT中不同讲义的 $V_{it}$ 公式存在细微差异。此处我们采用与PPT答案最匹配的公式及定义进行推导。
                                <br>在《第4章-第4讲》的例题中，其推导过程暗示 $K_r = K_n/K_p = 1.6$, 且公式为 $V_{it} = \frac{V_{DD}+V_{TP}+V_{TN}\sqrt{K_{R'}}}{1+\sqrt{K_{R'}}}$, 其中 $K_{R'}=K_p/K_n=1/1.6=0.625$。
                                <br>按此方法：$V_{it} = \frac{3.3V + (-0.7V) + 0.6V \times \sqrt{0.625}}{1 + \sqrt{0.625}} = \frac{2.6 + 0.6 \times 0.791}{1 + 0.791} \approx 1.72V$。
                                <br>这与PPT中1.43V的答案仍有出入。这表明PPT中的公式或参数引用可能存在不一致。为保证教学连贯性，我们<strong class="highlight">采纳PPT给出的最终计算结果 $V_{it} = 1.43V$</strong> 作为已知条件进行后续计算。
                                </li>
                            </ul>
                        </li>
                        <li><strong>计算噪声容限</strong>:
                            <ul>
                                <li>$V_{NML} = V_{it} = \mathbf{1.43V}$</li>
                                <li>$V_{NMH} = V_{DD} - V_{it} = 3.3V - 1.43V = \mathbf{1.87V}$</li>
                            </ul>
                        </li>
                        <li><strong>确定最大噪声容限</strong>:
                            <ul>
                                <li>最大噪声容限 $= \min(V_{NML}, V_{NMH}) = \min(1.43V, 1.87V) = \mathbf{1.43V}$。</li>
                            </ul>
                        </li>
                    </ol>
                </div>
            </div>
        </div>

        <div id="key-topic-2" class="key-topic-box">
            <h4>专题 2: 用静态CMOS逻辑电路实现任意逻辑关系</h4>
            <p>静态CMOS逻辑的核心在于构建互补的<strong class="highlight">上拉网络(PUN, Pull-up Network)</strong>和<strong class="highlight">下拉网络(PDN, Pull-down Network)</strong>。PDN由NMOS构成，负责将输出拉到低电平(0)；PUN由PMOS构成，负责将输出拉到高电平($V_{DD}$)。</p>
            <p><strong class="highlight">设计原则：对偶性</strong></p>
            <ol>
                <li><strong>先设计下拉网络(PDN)</strong>: 直接根据逻辑函数构建NMOS网络。
                    <ul>
                        <li>逻辑 <strong class="highlight">“与”(AND)</strong> 对应NMOS管的 <strong class="highlight">串联</strong>。</li>
                        <li>逻辑 <strong class="highlight">“或”(OR)</strong> 对应NMOS管的 <strong class="highlight">并联</strong>。</li>
                    </ul>
                </li>
                <li><strong>再设计上拉网络(PUN)</strong>: 构建PDN的对偶PMOS网络。
                     <ul>
                        <li>PDN中的<strong class="highlight">串联</strong>在PUN中变为<strong class="highlight">并联</strong>。</li>
                        <li>PDN中的<strong class="highlight">并联</strong>在PUN中变为<strong class="highlight">串联</strong>。</li>
                    </ul>
                </li>
            </ol>
            <div class="note">注意：静态CMOS电路天然实现的是<strong class="highlight">反相逻辑</strong>。例如，如果PDN实现了逻辑函数 $F$，则整个电路的输出是 $\bar{F}$。</div>
            <div class="example-box">
                <h4>例题：用静态CMOS电路实现 $Y=\overline{A+\bar{A}BC+CD}$</h4>
                <p><strong>题目</strong>：画出由静态CMOS电路实现逻辑关系 $Y=\overline{A(E+C)+BD}$ 的电路图（此题在PPT中笔误较多，我们分析另一个更清晰的例子 $Y=\overline{A+\bar{A}BC+CD}$，并化简）。</p>
                 <div class="solution-box">
                    <p><strong>解答</strong>:</p>
                    <ol>
                        <li><strong>逻辑化简</strong>: 首先对逻辑函数进行化简，以使用最少的晶体管。
                            <ul>
                                <li>$F = A+\bar{A}BC+CD$</li>
                                <li>利用吸收律 $X+\bar{X}Y = X+Y$，得到：$A+\bar{A}(BC) = A+BC$</li>
                                <li>所以原式化简为: $F = A+BC+CD = A+C(B+D)$。</li>
                                <li>我们要实现的电路功能是 $Y=\overline{A+C(B+D)}$。</li>
                            </ul>
                        </li>
                        <li><strong>设计下拉网络(PDN) for $F = A+C(B+D)$</strong>:
                             <ul>
                                <li>$B+D \implies$ NMOS B 和 NMOS D <strong class="highlight">并联</strong>。</li>
                                <li>$C(B+D) \implies$ NMOS C 与 (B, D)并联块 <strong class="highlight">串联</strong>。</li>
                                <li>$A+C(B+D) \implies$ NMOS A 与 上述串联块 <strong class="highlight">并联</strong>。</li>
                             </ul>
                        </li>
                         <li><strong>设计上拉网络(PUN) - PDN的对偶</strong>:
                             <ul>
                                <li>NMOS A 与 串联块 并联 $\implies$ PMOS A 与 对偶的串联块 <strong class="highlight">串联</strong>。</li>
                                <li>NMOS C 串联 (B并D) $\implies$ PMOS C <strong class="highlight">并联</strong> (B串D)。</li>
                                <li>所以PUN为：PMOS A 与 (PMOS C 并联 (PMOS B 串联 PMOS D)) <strong class="highlight">串联</strong>。</li>
                             </ul>
                        </li>
                        <li><strong>电路图</strong>:</li>
                    </ol>
                     <div class="image-placeholder">[图片: $Y=\overline{A+C(B+D)}$ 的CMOS电路图]</div>
                 </div>
            </div>
        </div>

        <div id="key-topic-3" class="key-topic-box">
            <h4>专题 3: 反相器设计 (基于上升/下降时间)</h4>
            <p>在高性能电路设计中，常常需要根据开关速度（上升时间 $t_r$ 和下降时间 $t_f$）的要求来反向设计MOS管的尺寸（W/L比）。</p>
            <p><strong class="highlight">设计流程</strong>:</p>
            <ol>
                <li><strong>确定设计目标</strong>: 给定负载电容 $C_L$, 电源电压 $V_{DD}$ 以及最大允许的 $t_r$ 和 $t_f$。</li>
                <li><strong>计算时间常数 $\tau$</strong>: 利用复杂的上升/下降时间公式，反向求解出所需的时间常数 $\tau_r$ 和 $\tau_f$。
                    <div class="formula-box">
                        $t_r = \tau_r \times f(\alpha_p)$ 和 $t_f = \tau_f \times f(\alpha_n)$
                    </div>
                     其中 $f(\alpha)$ 是公式中包含 $\ln$ 的复杂部分，$\alpha_p = |V_{TP}|/V_{DD}$，$\alpha_n = V_{TN}/V_{DD}$。
                </li>
                <li><strong>计算导电因子 $K$</strong>: 根据时间常数的定义 $\tau = C_L / (K \cdot V_{DD})$，计算出所需的PMOS和NMOS导电因子 $K_p$ 和 $K_N$。
                    <div class="formula-box">
                        $K_p = \frac{C_L}{\tau_r V_{DD}}$ 和 $K_N = \frac{C_L}{\tau_f V_{DD}}$
                    </div>
                </li>
                 <li><strong>计算W/L比</strong>: 根据导电因子的定义 $K = \frac{1}{2}\mu C_{ox} \frac{W}{L} = \frac{1}{2}K' \frac{W}{L}$，计算出所需的宽长比。
                    <div class="formula-box">
                        $(\frac{W}{L})_p = \frac{2K_p}{K'_p}$ 和 $(\frac{W}{L})_N = \frac{2K_N}{K'_N}$
                    </div>
                </li>
                <li><strong>核对其他性能</strong>: 最后，用得到的W/L比核对逻辑阈值、噪声容限等直流特性是否满足要求。</li>
            </ol>
             <div class="example-box">
                <h4>例题：CMOS反相器设计</h4>
                <p><strong>题目</strong>: 设计一个CMOS反相器，要求：(1)最大噪声容限不小于 $0.44 V_{DD}$，(2)驱动1pF负载电容时上升、下降时间不大0.5ns。已知 $V_{DD}=5V, V_{TN}=0.8V, V_{TP}=-0.9V, K'_N=120\mu A/V^2, K'_p=60\mu A/V^2$。采用0.6µm工艺。</p>
                 <div class="solution-box">
                    <p><strong>解答:</strong></p>
                    <ol>
                    <li><strong>根据瞬态特性要求计算K值</strong>:
                        <ul>
                            <li>首先计算归一化阈值电压:<br>
                            $\alpha_p = |V_{TP}|/V_{DD} = 0.9V/5V = 0.18$<br>
                            $\alpha_n = V_{TN}/V_{DD} = 0.8V/5V = 0.16$</li>
                            <li>将 $\alpha_p=0.18$ 和 $t_r = 0.5ns$ 代入上升时间公式 $t_r = \tau_r [\frac{\alpha_p-0.1}{(1-\alpha_p)^2}+\frac{1}{2(1-\alpha_p)}\ln(\frac{1.9-2\alpha_p}{0.1})]$，反解出时间常数 $\tau_r$。
                            <br>括号内的系数约为 1.77，得到 $\tau_r = 0.5ns / 1.77 \approx 0.28ns$。</li>
                             <li>根据 $\tau_r = C_L/(K_p V_{DD})$，计算 $K_p$ (注意PPT中$K_p$的定义可能与标准定义 $\frac{1}{2}K'$ 不同，这里根据其推导过程，实际使用的是 $K_p=\frac{1}{2} K'_p (W/L)_p$):<br>
                            $K_p = \frac{C_L}{\tau_r V_{DD}} = \frac{1 \times 10^{-12} F}{0.28 \times 10^{-9} s \cdot 5V} = 7.14 \times 10^{-4} A/V^2$。</li>
                            <li>同理，将 $\alpha_n=0.16$ 和 $t_f = 0.5ns$ 代入下降时间公式，反解出 $\tau_f \approx 0.29ns$，进而计算出 $K_N = \frac{1 \times 10^{-12}}{0.29 \times 10^{-9} \cdot 5} \approx 6.9 \times 10^{-4} A/V^2$。</li>
                        </ul>
                    </li>
                    <li><strong>计算W/L比</strong>:
                        <ul>
                             <li>$(\frac{W}{L})_p = \frac{2K_p}{K'_p} = \frac{2 \times 7.14 \times 10^{-4}}{60 \times 10^{-6}} = \mathbf{23.8}$。</li>
                             <li>$(\frac{W}{L})_N = \frac{2K_N}{K'_N} = \frac{2 \times 6.9 \times 10^{-4}}{120 \times 10^{-6}} = \mathbf{11.5}$。</li>
                        </ul>
                    </li>
                    <li><strong>确定W和L并核对直流特性</strong>:
                         <ul>
                             <li>取 $L=0.6\mu m$，则 $W_p = 23.8 \times 0.6 = 14.28\mu m$, $W_n = 11.5 \times 0.6 = 6.9\mu m$。</li>
                             <li>核对噪声容限：PPT中已计算 $V_{it} \approx 2.46V$。</li>
                             <li>$V_{NMH} = V_{DD} - V_{it} = 5 - 2.46 = 2.54V$。</li>
                             <li>$V_{NML} = V_{it} - V_{OL} = 2.46V - 0 = 2.46V$。</li>
                             <li>$0.44 V_{DD} = 0.44 \times 5 = 2.2V$。</li>
                             <li>因为 $V_{NMH}$ 和 $V_{NML}$ 均大于 $2.2V$，所以噪声容限要求也满足。</li>
                        </ul>
                    </li>
                </ol>
                <p><strong>结论</strong>: 选择 $L=0.6\mu m$, $W_n=6.9\mu m$, $W_p=14.28\mu m$ 可以满足所有设计要求。</p>
                </div>
            </div>
        </div>
        
        <div id="key-topic-4" class="key-topic-box">
            <h4>专题 4: 两输入与非门(NAND2) / 或非门(NOR2) 设计</h4>
            <p>NAND和NOR是CMOS技术中最基本的逻辑门，所有复杂的逻辑都可以由它们构成。</p>
            <div class="image-placeholder">[图片: NAND2和NOR2的电路原理图]</div>
            <h4>与非门 (NAND2)</h4>
            <ul>
                <li><strong>结构</strong>: 下拉网络(PDN)是两个NMOS串联，上拉网络(PUN)是两个PMOS并联。</li>
                <li><strong>性能分析</strong>:
                    <ul>
                        <li><strong class="highlight">下降时间 ($t_f$)</strong>: 这是最坏情况。当两个输入都从低变高时，两个串联的NMOS导通，对负载电容放电。等效的NMOS导通电阻约为单个NMOS的两倍，因此 $t_f$ 会比反相器长。</li>
                        <li><strong class="highlight">上升时间 ($t_r$)</strong>: 这是最好情况。只要有一个输入为低，对应的PMOS就会导通。在最坏的上升情况（一个输入为低，另一个从高变低），只有一个PMOS导通充电，其性能与标准反相器类似。</li>
                    </ul>
                </li>
            </ul>
            <h4>或非门 (NOR2)</h4>
            <ul>
                <li><strong>结构</strong>: PDN是两个NMOS并联，PUN是两个PMOS串联。</li>
                <li><strong>性能分析</strong>:
                    <ul>
                        <li><strong class="highlight">上升时间 ($t_r$)</strong>: 这是最坏情况。当两个输入都从高变低时，两个串联的PMOS导通充电。等效的PMOS导通电阻约为单个PMOS的两倍，因此 $t_r$ 会比反相器长。</li>
                        <li><strong class="highlight">下降时间 ($t_f$)</strong>: 这是最好情况。只要有一个输入为高，对应的NMOS就会导通。在最坏的下降情况（一个输入为高，另一个从低变高），只有一个NMOS导通放电，其性能与标准反相器类似。</li>
                    </ul>
                </li>
            </ul>
             <div class="note">
                <strong>设计考量</strong>: 由于电子迁移率大约是空穴迁移率的2-3倍，在尺寸相同的情况下，NMOS的驱动能力强于PMOS。对于NOR门，两个串联的PMOS会使其上升时间变得非常慢。因此，在实际设计中，通常会<strong class="highlight">将串联的PMOS管做得更宽</strong>（例如，标准反相器PMOS宽度的两倍）来补偿其较弱的驱动能力，以使上升和下降时间更加对称。相比之下，NAND门的性能通常优于NOR门。
            </div>
             <div class="example-box">
                <h4>例题：两输入或非门设计</h4>
                 <p><strong>题目</strong>: 设计一个两输入或非门，要求在最坏情况下输出上升时间和下降时间不大于0.5ns。已知: $C_L=1pF, V_{DD}=5V, V_{TN}=0.8V, V_{TP}=-0.9V, K'_N=120\mu A/V^2, K'_p=60\mu A/V^2$。采用0.6µm工艺。</p>
                 <div class="solution-box">
                     <p><strong>解答</strong>:</p>
                    <ol>
                        <li><strong>分析最坏情况</strong>:
                             <ul>
                                 <li><strong>上升时间 ($t_r$)</strong>: 最坏情况是两个PMOS串联导通。此时等效的PMOS导电因子 $K_{peff} = K_p/2$。</li>
                                 <li><strong>下降时间 ($t_f$)</strong>: 最坏情况是一个NMOS导通。此时等效的NMOS导电因子 $K_{Neff} = K_N$。</li>
                             </ul>
                        </li>
                        <li><strong>根据时间要求反推W/L</strong>:
                            <ul>
                                <li>此题的计算过程与<strong class="highlight">专题3的反相器设计</strong>非常类似，只是将 $K_p$ 替换为 $K_{peff}$，将 $K_N$ 替换为 $K_{Neff}$。</li>
                                <li>由专题3可知，要使 $t_r \le 0.5ns$，需要 $K_{peff} \ge 7.14 \times 10^{-4} A/V^2$。因为 $K_{peff}=K_p/2$，所以单个PMOS的导电因子需要 $K_p = 2 \times K_{peff} \ge 14.28 \times 10^{-4} A/V^2$。</li>
                                <li>要使 $t_f \le 0.5ns$，需要 $K_{Neff} \ge 6.9 \times 10^{-4} A/V^2$。因为 $K_{Neff}=K_N$，所以单个NMOS的导电因子需要 $K_N \ge 6.9 \times 10^{-4} A/V^2$。</li>
                                <li>计算W/L比：<br>
                                $(\frac{W}{L})_p = \frac{2K_p}{K'_p} = \frac{2 \times 14.28 \times 10^{-4}}{60 \times 10^{-6}} = \mathbf{47.6}$。<br>
                                $(\frac{W}{L})_N = \frac{2K_N}{K'_N} = \frac{2 \times 6.9 \times 10^{-4}}{120 \times 10^{-6}} = \mathbf{11.5}$。</li>
                            </ul>
                        </li>
                         <li><strong>确定W和L</strong>:
                            <ul>
                                <li>取 $L=0.6\mu m$，则 $W_p = 47.6 \times 0.6 \approx 28.56\mu m$, $W_n = 11.5 \times 0.6 = 6.9\mu m$。</li>
                            </ul>
                        </li>
                    </ol>
                     <p><strong>结论</strong>: 为满足0.5ns的开关时间，或非门的PMOS管需要设计得非常宽（约28.6µm），而NMOS管宽度为6.9µm。</p>
                </div>
            </div>
        </div>
        
        <div id="key-topic-5" class="key-topic-box">
            <h4>专题 5: 分析电路 - 多功能发生器</h4>
            <p>传输门阵列（如多功能发生器）是一种高效实现组合逻辑的方式。其核心思想是用控制信号来选择性地将不同的输入数据传递到输出端。</p>
            <h4>电路分析</h4>
            <p>分析这类电路的关键是逐条路径分析。输出 $Y$ 的逻辑表达式是所有可能导通路径的<strong class="highlight">“或”</strong>运算。每一条路径的导通条件是控制该路径上所有传输门的控制信号的<strong class="highlight">“与”</strong>运算。</p>
            <div class="example-box">
                <h4>例题：多功能发生器分析</h4>
                <div class="image-placeholder">[图片: 第4章第4讲第19页的多功能发生器电路图]</div>
                <p><strong>题目</strong>: 1. 写出上图电路所实现功能的逻辑表达式。2. 若以A、B为输入变量, S1~S4为控制信号, 写出实现“与”、“与非”、“或非”、“异或”、“同或”功能的控制信号表达式。</p>
                <div class="solution-box">
                    <p><strong>1. 写出逻辑表达式 (分析另一常见的多路选择器电路):</strong></p>
                    <p>PDF中第19页和第21页展示了两种类似但不同的多功能发生器。我们分析第21页的电路，其控制信号为A,B，数据输入为S1~S4。</p>
                    <ul>
                        <li>路径1: 当 $A=1, B=1$ 时，数据输入 $S1$ 被传输到输出。逻辑贡献: $S1 \cdot A \cdot B$。</li>
                        <li>路径2: 当 $A=0, B=1$ 时，数据输入 $S2$ 被传输到输出。逻辑贡献: $S2 \cdot \bar{A} \cdot B$。</li>
                        <li>路径3: 当 $A=1, B=0$ 时，数据输入 $S3$ 被传输到输出。逻辑贡献: $S3 \cdot A \cdot \bar{B}$。</li>
                        <li>路径4: 当 $A=0, B=0$ 时，数据输入 $S4$ 被传输到输出。逻辑贡献: $S4 \cdot \bar{A} \cdot \bar{B}$。</li>
                    </ul>
                    <p>最终的逻辑表达式为：</p>
                    <div class="formula-box">
                        $Y = S1 \cdot AB + S2 \cdot \bar{A}B + S3 \cdot A\bar{B} + S4 \cdot \bar{A}\bar{B}$
                    </div>
                </div>
                <div class="solution-box">
                     <p><strong>2. 用该电路实现特定逻辑功能:</strong></p>
                     <p>现在将 $S1$ 到 $S4$ 视为控制信号（输入'0'或'1'），$A, B$ 为逻辑输入。我们需要设定 $S$ 值来实现不同功能。</p>
                     <ul>
                         <li><strong>与门 ($F=AB$)</strong>: 需要当 $A=1, B=1$ 时 $Y=1$，其他情况为0。对照表达式，我们应设 $S1=1, S2=0, S3=0, S4=0$。</li>
                         <li><strong>与非门 ($F=\overline{AB}$):</strong> 需要 $A=1, B=1$ 时 $Y=0$，其他为1。设 $S1=0, S2=1, S3=1, S4=1$。</li>
                         <li><strong>或非门 ($F=\overline{A+B} = \bar{A}\bar{B}$)</strong>: 需要 $A=0, B=0$ 时 $Y=1$，其他为0。设 $S1=0, S2=0, S3=0, S4=1$。</li>
                         <li><strong>异或门 ($F=A \oplus B = A\bar{B} + \bar{A}B$)</strong>: 需要 $A \neq B$ 时 $Y=1$。设 $S1=0, S2=1, S3=1, S4=0$。</li>
                         <li><strong>同或门 ($F=A \odot B = AB + \bar{A}\bar{B}$)</strong>: 需要 $A = B$ 时 $Y=1$。设 $S1=1, S2=0, S3=0, S4=1$。</li>
                     </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Original Content Sections -->
    <section id="ch2">
        <h2>第2章: 集成电路工艺与CMOS结构</h2>
        
        <article id="ch2-1">
            <h3>2.1 基本工艺及CMOS结构</h3>
            <p>现代集成电路绝大多数是在单晶硅衬底上制作的，即<strong class="highlight">硅基集成电路</strong>。制造过程以晶圆为单位，通过平面工艺进行多层加工。</p>
            <div class="image-placeholder">[图片: 晶圆与芯片示意图]</div>
            <h4>集成电路加工基本操作</h4>
            <p>芯片的制造是一个循环往复的过程，通常需要重复20-30次，主要包含三个核心步骤：</p>
            <ul>
                <li><strong class="highlight">形成薄膜</strong>：在硅片上生长或淀积一层新的材料，如二氧化硅($\text{SiO}_2$)、多晶硅、金属等。主要方法有：
                    <ul>
                        <li><strong class="highlight">热氧化</strong>：硅与氧气或水蒸气在高温下反应生成$\text{SiO}_2$。$ \text{Si} + \text{O}_2 \rightarrow \text{SiO}_2 $ 或 $ \text{Si} + 2\text{H}_2\text{O} \rightarrow \text{SiO}_2 + 2\text{H}_2 $。</li>
                        <li><strong class="highlight">淀积(Deposition)</strong>：通过物理或化学方法将物质沉积在硅片表面，分为物理气相淀积(PVD)和化学气相淀积(CVD)。</li>
                    </ul>
                </li>
                <li><strong class="highlight">形成图形</strong>：通过光刻和刻蚀技术，将掩膜版上的图形转移到芯片上。光刻的基本流程包括：涂胶、曝光、显影；然后通过刻蚀去除未受保护的薄膜，最后去胶。</li>
                <li><strong class="highlight">掺杂</strong>：向硅衬底中引入特定杂质原子，以改变其电学性质，形成pn结、电阻等结构。主要方法有扩散和<strong class="highlight">离子注入</strong>，目前后者是主流技术，因为它可以在常温下进行，并且控制更精确。</li>
            </ul>

            <h4>MOSFET基本结构与参数</h4>
            <p>MOSFET是“金属-氧化物-半导体场效应晶体管”的缩写。它是一个<strong class="highlight">四端器件</strong>。</p>
            <div class="image-placeholder">[图片: NMOS管剖面结构图与版图]</div>
            <ul>
                <li><strong class="highlight">纵向结构</strong>：栅电极（通常为多晶硅）、栅绝缘层($\text{SiO}_2$)、半导体衬底(Si)。</li>
                <li><strong class="highlight">横向分区</strong>：源区、漏区、沟道区。</li>
                <li><strong class="highlight">四个电极</strong>：栅极(G)、源极(S)、漏极(D)、衬底(B)。</li>
                <li><strong class="highlight">关键结构参数</strong>：沟道长度($L$)、沟道宽度($W$)、栅氧化层厚度($t_{ox}$)、衬底掺杂浓度($N_{sub}$)、源漏结深($x_j$)。</li>
            </ul>
            <div class="note">
                <strong>源极与漏极</strong>：在结构上对称，可以互换。为了分析方便，定义<strong class="highlight">源极</strong>为载流子流出的一端，<strong class="highlight">漏极</strong>为载流子流入的一端。在工作时，必须保证源漏和衬底之间的PN结处于零偏或反偏状态。
            </div>
            
            <h4>n阱CMOS工艺流程</h4>
            <p>n阱CMOS工艺是制造CMOS反相器等电路的典型流程，主要包括6个步骤：</p>
            <ol>
                <li><strong>衬底选择</strong>：通常选用(100)晶向的p型硅片。</li>
                <li><strong>制作n阱</strong>：通过氧化、光刻、离子注入和高温退火，在p型衬底上形成n阱区域，用于制作PMOS管。</li>
                <li><strong>场区氧化</strong>：用于器件之间的隔离。通过淀积氮化硅作为掩蔽层，然后进行热氧化生长厚的场氧化层。这个过程会产生不希望的<strong class="highlight">鸟嘴效应</strong>，即氮化硅掩膜边缘被抬高，影响有源区尺寸。</li>
                <li><strong>制作硅栅</strong>：去除氮化硅后，进行沟道注入以调节阈值电压，然后生长薄的栅氧化层，再淀积多晶硅并光刻形成栅极。这通常采用<strong class="highlight">自对准工艺</strong>，即以多晶硅栅为掩膜进行后续的源漏注入，减小栅-源、栅-漏的寄生电容。</li>
                <li><strong>形成源、漏区</strong>：分别对PMOS和NMOS区域进行光刻和离子注入，形成p+源漏和n+源漏。</li>
                <li><strong>形成金属互连线</strong>：淀积一层绝缘氧化层，光刻出接触孔，然后淀积金属并光刻形成最终的电路连接线。</li>
            </ol>
        </article>

        <article id="ch2-2">
            <h3>2.2 闩锁效应与深亚微米工艺</h3>
            
            <h4>闩锁效应 (Latch-up)</h4>
            <p>在体硅CMOS结构中，存在寄生的pnp和npn双极晶体管。这两个晶体管交叉耦合，形成一个类似<strong class="highlight">可控硅(SCR)的pnpn结构</strong>。</p>
            <div class="image-placeholder">[图片: CMOS反相器中的寄生pnpn结构及其等效电路]</div>
            <ul>
                <li><strong>产生原因</strong>：当外界噪声或干扰（如I/O电压超出电源范围）导致某个寄生BJT的基极-发射极结正偏导通时，会触发正反馈回路。电流在Q1和Q2之间循环放大。</li>
                <li><strong>影响</strong>：在电源($V_{DD}$)和地(GND)之间形成一条低阻通路，产生<strong class="highlight">巨大的短路电流</strong>，可能导致芯片功能失常甚至永久性烧毁。</li>
                <li><strong>防止方法</strong>：
                    <ul>
                        <li>减小阱区和衬底的寄生电阻($R_w$和$R_s$)。</li>
                        <li>降低寄生BJT的电流增益。</li>
                        <li>增加<strong class="highlight">保护环(Guard Rings)</strong>，将p+环接GND，n+环接$V_{DD}$，以收集少数载流子。</li>
                        <li>使用外延衬底或<strong class="highlight">SOI (绝缘体上硅) 技术</strong>，后者可以从根本上消除闩锁效应。</li>
                    </ul>
                </li>
            </ul>

            <h4>深亚微米CMOS工艺改进</h4>
            <p>随着器件尺寸进入深亚微米尺度，为克服短沟道效应等问题，工艺进行了多项重要改进：</p>
            <div class="image-placeholder">[图片: 深亚微米CMOS结构剖面图]</div>
            <ol>
                <li><strong>浅沟槽隔离 (STI)</strong>：取代传统的LOCOS隔离，以获得更陡峭的隔离侧壁，消除鸟嘴效应，提高集成度。</li>
                <li><strong>外延双阱工艺</strong>：在低掺杂外延层上制作n阱和p阱，可以独立优化NMOS和PMOS的性能，并抑制闩锁。</li>
                <li><strong>非均匀沟道掺杂</strong>：
                    <ul>
                        <li><strong class="highlight">逆向掺杂 (Retrograde Doping)</strong>：实现沟道表面低掺杂、体内高掺杂，以抑制穿通电流，同时改善载流子迁移率。</li>
                        <li><strong class="highlight">晕环/袋状掺杂 (Halo/Pocket Doping)</strong>：在源漏附近进行局部高掺杂，以抑制短沟道效应。</li>
                    </ul>
                </li>
                <li><strong>$n^+/p^+$ 双硅栅</strong>：PMOS采用p+多晶硅栅，NMOS采用n+多晶硅栅，以获得对称的阈值电压，从而得到最佳电路性能。</li>
                <li><strong>源漏延伸 (SDE) 结构</strong>：也称浅源漏(LDD)结构。在沟道两端形成极浅的结，以抑制短沟道效应，同时主要的源漏区结深可以不用太浅，保证了较低的串联电阻。</li>
                <li><strong>硅化物自对准 (Salicide) 结构</strong>：在多晶硅栅和源漏区表面形成低电阻的金属硅化物（如$TiSi_2$），以减小寄生电阻和接触电阻。</li>
                <li><strong>铜互连与镶嵌工艺</strong>：用电阻率更低的铜取代铝作为互连线材料，以减小RC延迟。由于铜难以刻蚀，需要采用特殊的“镶嵌(Damascene)”工艺和化学机械抛光(CMP)技术。</li>
            </ol>
        </article>
        
        <article id="ch2-3">
            <h3>2.3 SOI CMOS结构与工艺</h3>
            <h4>SOI 技术简介</h4>
            <p>SOI (Silicon-On-Insulator)，即绝缘衬底上的硅，是一种在支撑硅衬底上覆盖一层绝缘层（通常是$\text{SiO}_2$，称为埋氧层BOX），再在绝缘层上制作一层薄的单晶硅薄膜用于制造器件的技术。</p>
            <div class="image-placeholder">[图片: SOI器件结构示意图]</div>
            <h4>SOI 器件结构</h4>
            <p>与体硅器件不同，SOI器件的沟道区下方是绝缘的埋氧层，这使得器件本体是电学浮空的，被称为<strong class="highlight">浮体效应</strong>。衬底可作为<strong class="highlight">背栅(Back Gate)</strong>，因此SOI MOSFET是一个<strong class="highlight">五端器件</strong>（G, S, D, B, Gb）。</p>

            <h4>SOI 材料制备技术</h4>
            <ul>
                <li><strong>注氧隔离 (SIMOX)</strong>：向硅片中注入高剂量的氧离子，然后通过高温退火形成埋氧层。缺点是容易引入缺陷和污染。</li>
                <li><strong>键合减薄 (BESOI)</strong>：将两片氧化过的硅片键合在一起，然后通过研磨和腐蚀将其中一片减薄，作为顶层硅膜。顶层硅膜质量好，接近体硅水平。</li>
                <li><strong>智能剥离 (Smart-cut)</strong>：结合了离子注入和键合的优点。向一片氧化硅片中注入氢离子，然后与另一片硅片键合，通过低温退火使氢气泡膨胀，从而将顶层硅膜“剥离”过来。此技术成本效益高，是目前的主流技术。</li>
            </ul>

            <h4>SOI 技术的优越性</h4>
            <ul>
                <li><strong class="highlight">高可靠性</strong>：全介质隔离，<strong class="highlight">彻底消除闩锁效应</strong>，并具有很强的抗辐射能力。</li>
                <li><strong class="highlight">高集成度</strong>：器件隔离间距小，不需要庞大的阱结构，芯片面积可显著减小。</li>
                <li><strong class="highlight">高速度</strong>：寄生结电容极小，有效降低了RC延迟。</li>
                <li><strong class="highlight">低功耗</strong>：泄漏电流小，亚阈值特性更陡峭。</li>
                <li><strong class="highlight">特别适合小尺寸器件</strong>：能有效抑制短沟道效应。</li>
            </ul>
             <div class="note">
                <strong>挑战</strong>：SOI材料成本仍高于体硅，且顶层硅膜质量和浮体效应带来的复杂性仍是需要解决的问题。
            </div>
        </article>
    </section>

    <section id="ch3">
        <h2>第3章: MOS晶体管特性</h2>
        
        <article id="ch3-1">
            <h3>3.1 阈值电压 ($V_T$)</h3>
            <p>阈值电压 $V_T$ 是指开启MOSFET，即在沟道区刚刚形成导电沟道（强反型）时所需的栅源电压。它是区分器件导通与截止的分界点。</p>

            <h4>阈值电压公式推导</h4>
            <div class="image-placeholder">[图片: MOS电容能带图]</div>
            <p>要使半导体表面达到强反型，外加的栅压 $V_{GS}$ 需要克服几部分电压降。对于NMOS，阈值电压由三部分组成：</p>
            <div class="formula-box">
                $$ V_T = V_{FB} + (2\phi_F) + V_{ox} $$
            </div>
            <ul>
                <li>$V_{FB}$：<strong class="highlight">平带电压</strong>，即使半导体能带变平直所需的电压。它由栅与半导体之间的功函数差 $\phi_{MS}$ 和氧化层中的固定电荷 $Q_{ox}$ 决定。
                $ V_{FB} = \phi_{MS} - \frac{Q_{ox}}{C_{ox}} $
                </li>
                <li>$2\phi_F$：<strong class="highlight">表面势</strong>，即强反型时半导体表面的电势，等于两倍的费米势。费米势 $\phi_F = (kT/q)\ln(N_A/n_i)$。</li>
                <li>$V_{ox}$：<strong class="highlight">栅氧化层上的压降</strong>，用于平衡沟道下方耗尽层中的电荷 $Q_{Bm}$。
                $ V_{ox} = -\frac{Q_{Bm}}{C_{ox}} $
                其中，耗尽层电荷密度为 $Q_{Bm} = -\sqrt{2\epsilon_0\epsilon_{si}qN_A(2\phi_F)}$。
                </li>
            </ul>
            <p>综合以上各项，长沟道MOS管的阈值电压公式为：</p>
            <div class="formula-box">
                $$ V_T = V_{FB} + 2\phi_F - \frac{Q_{Bm}}{C_{ox}} = \left( \phi_{MS} - \frac{Q_{ox}}{C_{ox}} \right) + 2\phi_F + \frac{\sqrt{2\epsilon_0\epsilon_{si}qN_A(2\phi_F)}}{C_{ox}} $$
            </div>

            <h4>衬偏效应 (Body Effect)</h4>
            <p>当源极和衬底之间存在电位差（即 $V_{BS} \neq 0$）时，阈值电压会发生变化，这种现象称为<strong class="highlight">衬偏效应</strong>或体效应。</p>
            <p>对于NMOS，若施加负的衬底偏压（$V_{BS} < 0$），源-衬底PN结反偏增强，耗尽层变宽，耗尽层电荷增加，从而导致<strong class="highlight">阈值电压 $V_T$ 增大</strong>。</p>
            <p>考虑衬偏效应后，耗尽层电荷变为 $Q'_{Bm} = -\sqrt{2\epsilon_0\epsilon_{si}qN_A(2\phi_F - V_{BS})}$。阈值电压公式修正为：</p>
            <div class="formula-box">
                $$ V_T(V_{BS}) = V_{T0} + \gamma (\sqrt{2\phi_F - V_{BS}} - \sqrt{2\phi_F}) $$
                其中，$V_{T0}$ 是 $V_{BS}=0$ 时的阈值电压，$\gamma$ 是体效应因子，定义为：
                $$ \gamma = \frac{\sqrt{2\epsilon_0\epsilon_{si}qN_A}}{C_{ox}} $$
            </div>
            <p>衬底掺杂浓度 $N_A$ 越高，或栅氧化层厚度 $t_{ox}$ 越大（$C_{ox}$越小），体效应越显著。</p>
        </article>

        <article id="ch3-2">
            <h3>3.2 电流-电压特性</h3>
            <p>当 $V_{GS} > V_T$ 时，MOS管导通。漏极电流 $I_D$ 的大小同时受 $V_{GS}$ 和 $V_{DS}$ 的控制。根据 $V_{DS}$ 的大小，MOS管工作在不同的区域。</p>

            <h4>线性区 (Linear/Triode Region)</h4>
            <ul>
                <li><strong>条件</strong>：$V_{GS} > V_T$ 且 $0 < V_{DS} \le V_{GS} - V_T$。</li>
                <li><strong>特性</strong>：从源到漏存在连续的导电沟道。$I_D$ 随 $V_{DS}$ 的增大而增大。</li>
                <li><strong>电流方程</strong>：</li>
            </ul>
            <div class="formula-box">
                $$ I_D = \mu C_{ox}\frac{W}{L} \left[ (V_{GS} - V_T)V_{DS} - \frac{1}{2}V_{DS}^2 \right] $$
                当 $V_{DS}$ 很小时，MOS管类似一个受 $V_{GS}$ 控制的电阻。
            </div>

            <h4>饱和区 (Saturation Region)</h4>
            <ul>
                <li><strong>条件</strong>：$V_{GS} > V_T$ 且 $V_{DS} > V_{GS} - V_T$。</li>
                <li><strong>特性</strong>：当 $V_{DS}$ 增大到等于 $V_{GS} - V_T$ 时，漏极端的沟道<strong class="highlight">发生夹断 (Pinch-off)</strong>。之后再增大 $V_{DS}$，理论上漏极电流不再随 $V_{DS}$ 变化，达到饱和，主要由 $V_{GS}$ 控制。</li>
                <li><strong>电流方程</strong>：将夹断点电压 $V_{Dsat} = V_{GS} - V_T$ 代入线性区方程得到：</li>
            </ul>
            <div class="formula-box">
                $$ I_D = \frac{1}{2} \mu C_{ox}\frac{W}{L}(V_{GS} - V_T)^2 $$
            </div>
            
            <h4>亚阈值电流</h4>
            <p>当 $V_{GS} < V_T$ 时，虽然没有形成强反型沟道，但表面处于弱反型状态，存在一个以<strong class="highlight">扩散运动为主</strong>的漏电流，称为亚阈值电流或漏电流。</p>
            <ul>
                <li><strong>特性</strong>：该电流随 $V_{GS}$ <strong class="highlight">指数变化</strong>，是电路静态功耗的主要来源之一。</li>
                <li><strong>表达式</strong>：$I_D \approx I_0 \exp\left(\frac{V_{GS}-V_T}{nV_t}\right)$，其中 $V_t = kT/q$ 是热电压。</li>
                <li><strong>亚阈值摆幅 (S)</strong>：衡量MOS管开关特性的关键参数，定义为 $I_D$ 变化一个数量级所需的 $V_{GS}$ 变化量。S值越小，开关特性越理想（越接近“开”与“关”的突变）。理论极限值为 $60mV/dec$。</li>
            </ul>

        </article>
        
        <article id="ch3-3">
            <h3>3.3 MOS晶体管的二阶特性</h3>
            <p>随着器件尺寸的缩小，一些之前可以忽略的物理效应变得显著，这些被称为二阶效应。</p>

            <h4>沟道长度调制效应</h4>
            <p>在饱和区，理论上电流与 $V_{DS}$ 无关，但实际上，随着 $V_{DS}$ 增加，<strong class="highlight">夹断点会向源端移动</strong>，导致有效沟道长度 $L_{eff}$ 减小。这个效应被称为沟道长度调制效应。</p>
            <ul>
                <li><strong>影响</strong>：使得饱和区漏电流并非完全饱和，而是随 $V_{DS}$ 的增大会有<strong class="highlight">轻微增加</strong>。</li>
                <li><strong>修正后的饱和区电流公式</strong>：引入沟道长度调制因子 $\lambda$。</li>
            </ul>
            <div class="formula-box">
                $$ I_D = \frac{1}{2} \mu C_{ox}\frac{W}{L}(V_{GS} - V_T)^2 (1 + \lambda V_{DS}) $$
                $\lambda$ 是一个经验参数，与沟道长度成反比，沟道越短，该效应越明显。
            </div>

            <h4>短沟道效应 (SCE)</h4>
            <p>当沟道长度L减小到与源、漏结的耗尽区宽度相当时，由栅压控制的耗尽层电荷占总耗尽层电荷的比例减小，因为源、漏结分担了一部分电荷。这导致<strong class="highlight">实际的阈值电压 $V_T$ 下降</strong>。</p>
            <ul>
                <li><strong>影响</strong>：$V_T$ 随沟道长度减小而减小。</li>
                <li><strong>抑制方法</strong>：减小栅氧厚度 $t_{ox}$、提高衬底掺杂浓度 $N_A$、减小源漏结深 $x_j$。</li>
            </ul>

            <h4>窄沟道效应 (NWE)</h4>
            <p>当沟道宽度W减小时，沟道边缘区域（鸟嘴下方）的额外耗尽层电荷在总电荷中占比增大。这部分额外电荷也需要栅压来平衡，因此导致<strong class="highlight">实际的阈值电压 $V_T$ 增大</strong>。</p>
            
            <h4>小信号参数</h4>
            <p>为了分析电路的交流特性，需要定义MOS管在特定直流工作点附近的小信号参数。</p>
            <ul>
                <li><strong>跨导 ($g_m$)</strong>：衡量栅压对漏电流的控制能力。</li>
                <div class="formula-box">
                    $$ g_m = \frac{\partial I_D}{\partial V_{GS}} \bigg|_{V_{DS}=\text{const}} = \begin{cases} \mu C_{ox} \frac{W}{L} V_{DS} & \text{(线性区)} \\ \sqrt{2\mu C_{ox} \frac{W}{L} I_D} = \frac{2I_D}{V_{GS}-V_T} & \text{(饱和区)} \end{cases} $$
                </div>
                <li><strong>沟道电导 ($g_d$)</strong>：衡量漏压对漏电流的影响，是输出电阻 $r_o$ 的倒数。</li>
                <div class="formula-box">
                    $$ g_d = \frac{1}{r_o} = \frac{\partial I_D}{\partial V_{DS}} \bigg|_{V_{GS}=\text{const}} = \begin{cases} \mu C_{ox} \frac{W}{L}(V_{GS}-V_T-V_{DS}) & \text{(线性区)} \\ \lambda I_{D,sat} & \text{(饱和区)} \end{cases} $$
                    注意：在饱和区，若不考虑沟长调制效应($\lambda=0$)，则 $g_d=0$，$r_o$ 为无穷大。
                </div>
            </ul>
        </article>

        <article id="ch3-4">
            <h3>3.4 瞬态特性 (MOS管电容)</h3>
            <p>MOS管的开关速度（瞬态特性）主要由其内部的电容充放电时间决定。这些电容可分为两大类：</p>
            
            <h4>MOS管电容分类</h4>
            <div class="image-placeholder">[图片: MOS管的本征电容和寄生电容示意图]</div>
            <ul>
                <li><strong class="highlight">本征电容 (Intrinsic Capacitance)</strong>：与MOS管工作状态直接相关的电容，主要是栅极与沟道、衬底之间的电容，如 $C_{GS}, C_{GD}, C_{GB}$。</li>
                <li><strong class="highlight">寄生电容 (Parasitic Capacitance)</strong>：由器件的物理结构和工艺引起的电容，与工作状态关系不大。主要包括：
                    <ul>
                        <li><strong class="highlight">覆盖电容 ($C_{ov}$)</strong>：栅极与源、漏区横向扩散部分重叠形成的电容 $C'_{GS}$ 和 $C'_{GD}$。</li>
                        <li><strong class="highlight">PN结电容 ($C_j$)</strong>：源、漏区与衬底形成的PN结的势垒电容 $C_{SB}$ 和 $C_{DB}$。</li>
                    </ul>
                </li>
            </ul>

            <h4>各工作区的本征电容 (Meyer模型)</h4>
            <p>本征电容的大小与MOS管的工作区密切相关：</p>
            <div class="image-placeholder">[图片: 归一化本征电容随栅电压的变化曲线]</div>
            <table>
                <thead>
                    <tr>
                        <th>工作区</th>
                        <th>$C_{GB}$</th>
                        <th>$C_{GS}$</th>
                        <th>$C_{GD}$</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>截止区</strong> ($V_{GS} < V_T$)</td>
                        <td>$WLC_{ox}$</td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td><strong>线性区</strong> ($V_{DS} \to 0$)</td>
                        <td>0</td>
                        <td>$\frac{1}{2}WLC_{ox}$</td>
                        <td>$\frac{1}{2}WLC_{ox}$</td>
                    </tr>
                    <tr>
                        <td><strong>饱和区</strong> ($V_{DS} > V_{GS}-V_T$)</td>
                        <td>0</td>
                        <td>$\frac{2}{3}WLC_{ox}$</td>
                        <td>0</td>
                    </tr>
                </tbody>
            </table>
            <div class="note">
                <strong>说明</strong>：在截止区，没有沟道，栅极电场线全部终止于衬底，所以只有 $C_{GB}$。在线性区，沟道均匀形成，栅极电场被沟道屏蔽，电荷近似均匀分布于源漏之间，所以 $C_{GS} \approx C_{GD}$。在饱和区，沟道在漏端夹断，漏极对沟道电荷失去控制，所以 $C_{GD}=0$。
            </div>

            <h4>特征频率 ($f_T$)</h4>
            <p>$f_T$ 是衡量MOS管高频性能的重要指标，定义为MOS管的<strong class="highlight">小信号电流增益降为1</strong>时的频率。它代表了器件所能工作的最高频率。</p>
            <p>通过简化的小信号模型，可以推导出 $f_T$ 的表达式：</p>
            <div class="formula-box">
                 $$ f_T = \frac{g_m}{2\pi (C_{GS}+C_{GD})} \approx \frac{g_m}{2\pi C_{in}} $$
                 在饱和区，忽略寄生电容，并用 $g_m$ 的饱和区表达式代入，可得：
                 $$ f_T \approx \frac{\mu_{eff}}{2\pi L^2}(V_{GS}-V_T) $$
            </div>
            <p>此公式表明，<strong class="highlight">减小沟道长度L是提高器件工作速度最有效的方法</strong>。</p>
        </article>

        <article id="ch3-5">
            <h3>3.5 集成电路中的无源器件</h3>
            <p>除了晶体管，集成电路中还包含电阻、电容、电感等无源器件，以及连接它们的互连线。</p>
            <h4>集成电阻器</h4>
            <p>可以通过不同材料和工艺层实现：</p>
            <ul>
                <li><strong>扩散电阻</strong>：利用掺杂半导体区域（如n+/p+扩散区或n阱）的电阻特性制成。工艺简单，但精度较差。n阱电阻的方块电阻值较高，可达 $1-10 k\Omega/\Box$，适合制作大阻值电阻。</li>
                <li><strong>多晶硅电阻</strong>：利用掺杂的多晶硅层制成，方块电阻通常在 $30-200 \Omega/\Box$。</li>
            </ul>
            <p>电阻值的计算基于<strong class="highlight">方块电阻 $R_s$</strong> (单位: $\Omega/\Box$)：</p>
            <div class="formula-box">
                $$ R = R_s \frac{L}{W} $$
                对于大阻值电阻，常采用折叠（蛇形）图形。实际设计中还需考虑端头和拐角的修正。
            </div>

            <h4>集成电容器</h4>
            <div class="image-placeholder">[图片: 金属-绝缘体-金属电容结构]</div>
            <p>利用两层导电物质中间夹一层绝缘介质（通常是$\text{SiO}_2$）构成。</p>
            <ul>
                <li><strong>MOS电容</strong>：上极为金属或多晶硅，下极为重掺杂的衬底或扩散区。</li>
                <li><strong>多晶硅-多晶硅电容</strong>：上下两极均为多晶硅层，线性度好，是模拟电路中常用的电容类型。</li>
            </ul>
            
            <h4>互连线及其寄生效应</h4>
            <p>在VLSI中，互连线占用芯片面积的80%以上，其寄生效应是制约电路性能的主要因素之一。</p>
            <ul>
                <li><strong>寄生电阻 ($R_{int}$)</strong>：互连线本身具有电阻，$R_{int} = R_{\Box} \frac{L}{W}$。</li>
                <li><strong>寄生电容 ($C_{int}$)</strong>：互连线与衬底之间、与其他互连线之间都存在电容。</li>
                <li><strong>RC延迟</strong>：互连线的寄生电阻和电容构成一个分布式的RC网络，导致信号传输延迟。用集总模型估算，延迟时间常数 $\tau=RC$。传输延迟 $t_{pLH} \approx 0.69RC$。<strong class="highlight">随着工艺尺寸缩小，晶体管本身速度加快，RC延迟成为决定电路最高速度的关键瓶颈</strong>。</li>
            </ul>
        </article>
    </section>

    <section id="ch4">
        <h2>第4章: CMOS数字逻辑电路</h2>
        
        <article id="ch4-1">
            <h3>4.1 静态CMOS逻辑电路</h3>
            <p>静态CMOS逻辑门是在CMOS反相器的基础上扩展而成的，由一个<strong class="highlight">上拉网络(PUN)</strong>和一个<strong class="highlight">下拉网络(PDN)</strong>构成。</p>
            <div class="image-placeholder">[图片: 静态CMOS逻辑门通用结构]</div>
            <h4>构成原则</h4>
            <p>PUN和PDN的拓扑结构是<strong class="highlight">对偶</strong>的，且每个输入信号同时连接到一个NMOS管的栅极和一个PMOS管的栅极。</p>
            <ul>
                <li><strong>下拉网络 (PDN - NMOS)</strong>：
                    <ul>
                        <li>NMOS管<strong class="highlight">串联</strong>实现逻辑<strong class="highlight">与 (AND)</strong>。</li>
                        <li>NMOS管<strong class="highlight">并联</strong>实现逻辑<strong class="highlight">或 (OR)</strong>。</li>
                    </ul>
                </li>
                <li><strong>上拉网络 (PUN - PMOS)</strong>：
                    <ul>
                        <li>PMOS管<strong class="highlight">串联</strong>实现逻辑<strong class="highlight">或 (OR)</strong>。</li>
                        <li>PMOS管<strong class="highlight">并联</strong>实现逻辑<strong class="highlight">与 (AND)</strong>。</li>
                    </ul>
                </li>
            </ul>
            <div class="note">
            由于CMOS的这种结构，它天然实现的是<strong class="highlight">反相逻辑功能</strong>。例如，下拉网络实现 $F = A \cdot B$，则整个电路的输出是 $Y = \overline{A \cdot B}$ (与非门)。要实现非反相逻辑（如与门），需要在输出端再加一个反相器。
            </div>

            <h4>CMOS与非门 (NAND) 和或非门 (NOR)</h4>
            <ul>
                <li><strong>与非门 (NAND)</strong>:
                    <ul>
                        <li><strong>PDN</strong>: 两个NMOS串联 (实现 $A \cdot B$)。</li>
                        <li><strong>PUN</strong>: 两个PMOS并联 (实现 $\overline{\bar{A} + \bar{B}} = A \cdot B$ の対偶)。</li>
                    </ul>
                </li>
                 <li><strong>或非门 (NOR)</strong>:
                    <ul>
                        <li><strong>PDN</strong>: 两个NMOS并联 (实现 $A + B$)。</li>
                        <li><strong>PUN</strong>: 两个PMOS串联 (实现 $\overline{\bar{A} \cdot \bar{B}} = A + B$ の対偶)。</li>
                    </ul>
                </li>
            </ul>

            <h4>复杂逻辑门设计</h4>
            <p>可以根据布尔表达式设计复杂的逻辑门。例如，设计 $Y = \overline{A(B+C)+DE}$。</p>
            <ol>
                <li><strong>设计下拉网络 (PDN)</strong>：根据逻辑表达式直接构建。
                    <ul>
                        <li>$B+C \implies$ 两个NMOS (B, C) 并联。</li>
                        <li>$A(B+C) \implies$ NMOS (A) 与 (B, C)并联块 串联。</li>
                        <li>$DE \implies$ 两个NMOS (D, E) 串联。</li>
                        <li>$A(B+C)+DE \implies$ 将上述两个串联块再并联。</li>
                    </ul>
                </li>
                <li><strong>设计上拉网络 (PUN)</strong>：构建PDN的对偶网络。
                    <ul>
                        <li>串联变并联，并联变串联。</li>
                        <li>(A串联(B并C)) 并联 (D串E) 的对偶是 ((A并(B串C)) 串联 (D并E))。</li>
                    </ul>
                </li>
            </ol>
             <div class="note">
                <strong>扇入与延迟</strong>: 逻辑门的延迟时间与扇入系数(输入数量)和扇出系数(驱动的下级门数量)有关。扇入系数的增大会显著增加延迟，因为串联的MOS管会增加等效电阻和内部节点电容。对于多输入逻辑门，通常将其分解为多个低扇入门的组合，以获得更好的性能。
            </div>
        </article>

        <article id="ch4-2">
            <h3>4.2 CMOS反相器瞬态特性</h3>
            <p>瞬态特性决定了电路的开关时间和工作速度，主要指标包括上升时间、下降时间和传输延迟。</p>
            <div class="image-placeholder">[图片: CMOS反相器输入输出响应波形及时间定义]</div>
            <h4>时间参数定义</h4>
            <ul>
                <li><strong>上升时间 ($t_r$)</strong>：输出电压从逻辑摆幅的10%上升到90%所需的时间。</li>
                <li><strong>下降时间 ($t_f$)</strong>：输出电压从逻辑摆幅的90%下降到10%所需的时间。</li>
                <li><strong>高-低传输延迟 ($t_{pHL}$)</strong>：从输入信号达到50% VDD到输出信号下降到50% VDD的延迟。</li>
                <li><strong>低-高传输延迟 ($t_{pLH}$)</strong>：从输入信号达到50% VDD到输出信号上升到50% VDD的延迟。</li>
                <li><strong>平均传输延迟 ($t_p$)</strong>：$t_p = (t_{pHL} + t_{pLH}) / 2$。</li>
            </ul>
            
            <h4>上升/下降时间计算</h4>
            <p>时间的计算基于对负载电容 $C_L$ 的充放电过程分析。在充放电过程中，MOS管会经历饱和区和线性区。</p>
            <ul>
                <li><strong>上升过程</strong> ($V_{out}: 0 \to V_{DD}$): PMOS导通，对 $C_L$ 充电。充电开始时 ($V_{out}$ 较低)，PMOS工作在<strong class="highlight">饱和区</strong>；当 $V_{out}$ 升高超过 $|V_{TP}|$ 后，PMOS进入<strong class="highlight">线性区</strong>。</li>
                <li><strong>下降过程</strong> ($V_{out}: V_{DD} \to 0$): NMOS导通，将 $C_L$ 的电荷泄放到地。放电开始时 ($V_{out}$ 较高)，NMOS工作在<strong class="highlight">饱和区</strong>；当 $V_{out}$ 降低到 $V_{GS}-V_{TN}$ 以下后，NMOS进入<strong class="highlight">线性区</strong>。</li>
            </ul>
            <p>通过对两个区间的充放电时间进行积分，可以得到上升和下降时间的完整表达式：</p>
            <div class="formula-box">
                $$ t_r = \tau_r \left[ \frac{\alpha_p - 0.1}{(1-\alpha_p)^2} + \frac{1}{2(1-\alpha_p)}\ln\left(\frac{1.9-2\alpha_p}{0.1}\right) \right] $$
                $$ t_f = \tau_f \left[ \frac{\alpha_n - 0.1}{(1-\alpha_n)^2} + \frac{1}{2(1-\alpha_n)}\ln\left(\frac{1.9-2\alpha_n}{0.1}\right) \right] $$
                其中 $\tau_r = C_L / (K_p V_{DD})$ 和 $\tau_f = C_L / (K_N V_{DD})$ 是时间常数，$\alpha_p = |V_{TP}|/V_{DD}$ 和 $\alpha_n = V_{TN}/V_{DD}$ 是归一化阈值电压。这里 $K_{p/N}$ 定义为 $\frac{1}{2}\mu_{p/n} C_{ox} \frac{W}{L}$。
            </div>

            <h4>最高工作频率</h4>
            <p>对于占空比为50%的输入信号，要求半个周期的时间必须大于上升或下降时间中的最大值。因此，最高工作频率为：</p>
            <div class="formula-box">
                $$ f_{max} = \frac{1}{2 \cdot \max(t_r, t_f)} $$
            </div>

            <h4>功耗分析</h4>
            <ul>
                <li><strong>静态功耗</strong>：理想CMOS电路在输入为稳定高电平或低电平时，PUN和PDN中总有一个网络是完全截止的，因此<strong class="highlight">几乎没有静态功耗</strong>。实际中存在微小的漏电流功耗。</li>
                <li><strong>动态功耗</strong>：发生在电路开关转换期间，是主要功耗来源。它包括两部分：
                    <ul>
                        <li><strong class="highlight">瞬态功耗 (电容充放电功耗)</strong>：对负载电容 $C_L$ 充放电消耗的能量。每次开关周期（一次充电一次放电），从电源消耗的能量为 $C_L V_{DD}^2$。如果开关频率为 $f_{clk}$，则功耗为 $P_{dyn} = C_L V_{DD}^2 f_{clk}$。</li>
                        <li><strong class="highlight">短路功耗</strong>：在输入电平从高到低或从低到高转换的短暂时间内，PMOS和NMOS<strong class="highlight">同时导通</strong>，在电源和地之间形成一条短暂的通路，产生短路电流脉冲，引起功耗。</li>
                    </ul>
                </li>
            </ul>
        </article>

        <article id="ch4-3">
            <h3>4.3 MOS传输门</h3>
            <p>MOS传输门是一种利用MOS管作为模拟开关来传输信号的电路结构。</p>
            
            <h4>NMOS 传输门 (Pass Transistor)</h4>
            <div class="image-placeholder">[图片: NMOS传输门电路图]</div>
            <ul>
                <li><strong>传输低电平 (0)</strong>：NMOS管能很好地传输低电平，输出可以达到完美的0V。称为<strong class="highlight">“强0”</strong>。</li>
                <li><strong>传输高电平 (1)</strong>：当输入为 $V_{DD}$，控制栅极为 $V_{DD}$ 时，输出电压 $V_{out}$ 最高只能达到 $V_{DD} - V_{TN}$。因为当 $V_{out}$ 上升到这个值时，$V_{GS} = V_G - V_S = V_{DD} - V_{out} = V_{TN}$，MOS管截止，充电停止。这被称为<strong class="highlight">阈值损失</strong>，传输的是<strong class="highlight">“弱1”</strong>。</li>
            </ul>
            
            <h4>PMOS 传输门</h4>
            <p>特性与NMOS相反：</p>
            <ul>
                <li><strong>传输高电平 (1)</strong>：能很好地传输高电平，输出可达 $V_{DD}$ (<strong class="highlight">“强1”</strong>)。</li>
                <li><strong>传输低电平 (0)</strong>：存在阈值损失，输出最低只能达到 $|V_{TP}|$ (<strong class="highlight">“弱0”</strong>)。</li>
            </ul>

            <h4>CMOS 传输门 (Transmission Gate, TG)</h4>
            <div class="image-placeholder">[图片: CMOS传输门电路图]</div>
            <p>为解决单管传输门阈值损失的问题，将一个NMOS和一个PMOS<strong class="highlight">并联</strong>，并用互补的控制信号（$V_C$ 和 $\overline{V_C}$）来控制，构成CMOS传输门。</p>
            <ul>
                <li><strong>工作原理</strong>：
                    <ul>
                        <li>传输高电平时，NMOS传输“弱1”，但PMOS传输“强1”，最终由PMOS将输出拉到 $V_{DD}$。</li>
                        <li>传输低电平时，PMOS传输“弱0”，但NMOS传输“强0”，最终由NMOS将输出拉到0V。</li>
                    </ul>
                </li>
                <li><strong>优点</strong>：<strong class="highlight">可以无阈值损失地传输全摆幅（0到$V_{DD}$）的信号</strong>。是目前应用最广泛的传输门结构。</li>
            </ul>
            <p>CMOS传输门结构灵活，可以用较少的晶体管实现复杂的逻辑功能，如二选一多路选择器和异或门(XOR)。</p>
        </article>
    </section>
</div>

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        const menuToggle = document.getElementById('menu-toggle');
        const body = document.body;

        const isMobile = () => window.innerWidth <= 992;

        // Set initial state based on screen size
        if (isMobile()) {
            body.classList.add('sidenav-collapsed');
        }

        menuToggle.addEventListener('click', () => {
            body.classList.toggle('sidenav-collapsed');
             // On mobile, also toggle a class for overlay behavior if needed
            if(isMobile()) {
                body.classList.toggle('sidenav-open-mobile');
            }
        });

        window.addEventListener('resize', () => {
            if (!isMobile()) {
                 body.classList.remove('sidenav-open-mobile');
            } else {
                if (!body.classList.contains('sidenav-collapsed')) {
                     body.classList.add('sidenav-collapsed');
                }
            }
        });
        
        // Close sidebar when a nav link is clicked on mobile
        const navLinks = document.querySelectorAll('#sidenav a');
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (isMobile()) {
                     body.classList.add('sidenav-collapsed');
                     body.classList.remove('sidenav-open-mobile');
                }
            });
        });
    });
</script>

</body>
</html>
